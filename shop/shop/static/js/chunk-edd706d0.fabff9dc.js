(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-edd706d0"],{2423:function(t,e,a){"use strict";a.d(e,"a",(function(){return s})),a.d(e,"c",(function(){return r})),a.d(e,"b",(function(){return n})),a.d(e,"d",(function(){return i})),a.d(e,"e",(function(){return l}));var o=a("b775");function s(t){return Object(o["a"])({url:"/article/GetDataByList",method:"get",params:t})}function r(t){return Object(o["a"])({url:"/article/GetIdByDetails",method:"get",params:{id:t}})}function n(t){return Object(o["a"])({url:"/article/GetIdByDel",method:"get",params:{id:t}})}function i(t){return Object(o["a"])({url:"/article/PostDataBySave",method:"post",data:t})}function l(t){return Object(o["a"])({url:"/article/PostDataByUp",method:"post",data:t})}},"27c1":function(t,e,a){"use strict";var o=a("f3a0"),s=a.n(o);s.a},3123:function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));var o=a("b775");function s(){return Object(o["a"])({url:"/qiniu/upload/token",method:"get"})}},"50b5":function(t,e,a){"use strict";var o=a("ad10"),s=a.n(o);s.a},"828d":function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));var o=a("b775");function s(t){return Object(o["a"])({url:"/search/user",method:"get",params:{name:t}})}},ad10:function(t,e,a){},eb43:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"createPost-container"},[a("el-form",{ref:"postForm",staticClass:"form-container",attrs:{model:t.postForm,rules:t.rules}},[a("sticky",{attrs:{"z-index":10,"class-name":"sub-navbar draft"}},[a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{type:"warning"},on:{click:t.submitForm}},[t._v("保存")])],1),t._v(" "),a("div",{staticClass:"createPost-main-container"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{staticStyle:{"margin-bottom":"40px"},attrs:{prop:"name"}},[a("MDinput",{attrs:{maxlength:100,name:"name",required:""},model:{value:t.postForm.name,callback:function(e){t.$set(t.postForm,"name",e)},expression:"postForm.name"}},[t._v("Title")])],1),t._v(" "),a("div",{staticClass:"postInfo-container"},[a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{"label-width":"120px",label:"店铺定位位置:",prop:"location"}},[a("el-input",{attrs:{placeholder:"输入店铺位置",clearable:""},model:{value:t.postForm.location,callback:function(e){t.$set(t.postForm,"location",e)},expression:"postForm.location"}})],1),t._v(" "),a("el-form-item",{attrs:{"label-width":"120px",label:"联系电话:",prop:"phone"}},[a("el-input",{attrs:{placeholder:"输入联系电话",clearable:""},model:{value:t.postForm.phone,callback:function(e){t.$set(t.postForm,"phone",e)},expression:"postForm.phone"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",[a("el-form-item",{attrs:{"label-width":"120px",label:"营业时间:"}},[a("el-time-select",{attrs:{placeholder:"起始时间","picker-options":{start:"08:30",step:"00:15",end:"18:30"}},model:{value:t.postForm.startTime,callback:function(e){t.$set(t.postForm,"startTime",e)},expression:"postForm.startTime"}}),t._v(" "),a("el-time-select",{attrs:{placeholder:"结束时间","picker-options":{start:"08:30",step:"00:15",end:"18:30",minTime:t.endTime}},model:{value:t.postForm.endTime,callback:function(e){t.$set(t.postForm,"endTime",e)},expression:"postForm.endTime"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{"label-width":"120px",label:"所在城市:"}},[a("el-select",{attrs:{placeholder:"请选择省份"},on:{change:t.handelProvinces},model:{value:t.postForm.povinces_code,callback:function(e){t.$set(t.postForm,"povinces_code",e)},expression:"postForm.povinces_code"}},t._l(t.Provinces,(function(t){return a("el-option",{key:t.area_code,attrs:{label:t.area_name,value:t.area_code}})})),1)],1)],1),t._v(" "),a("el-col",{attrs:{span:5}},[a("el-select",{attrs:{placeholder:"请选择城市"},on:{change:t.handelCity},model:{value:t.postForm.city_code,callback:function(e){t.$set(t.postForm,"city_code",e)},expression:"postForm.city_code"}},t._l(t.City,(function(t){return a("el-option",{key:t.area_code,attrs:{label:t.area_name,value:t.area_code}})})),1)],1),t._v(" "),a("el-col",{attrs:{span:5}},[a("el-select",{attrs:{placeholder:"请选择城市"},model:{value:t.postForm.area_code,callback:function(e){t.$set(t.postForm,"area_code",e)},expression:"postForm.area_code"}},t._l(t.Area,(function(t){return a("el-option",{key:t.area_code,attrs:{label:t.area_name,value:t.area_code}})})),1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{"label-width":"120px",label:"店铺Logo:",prop:"logo"}},[a("LoginImages",{attrs:{logo:t.postForm.logo},on:{handelImages:t.handelLogin}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{"label-width":"120px",label:"店铺是否开启:"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#909399","active-value":"1","inactive-value":"2"},model:{value:t.postForm.status,callback:function(e){t.$set(t.postForm,"status",e)},expression:"postForm.status"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:10,prop:"shopname"}},[a("el-form-item",{attrs:{"label-width":"120px",label:"登录账号:",prop:"shopname"}},[a("el-input",{attrs:{placeholder:"输入店铺账号",clearable:""},model:{value:t.postForm.shopname,callback:function(e){t.$set(t.postForm,"shopname",e)},expression:"postForm.shopname"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{"label-width":"120px",label:"登录密码:",prop:"password"}},[a("el-input",{attrs:{placeholder:"输入登录密码",clearable:""},model:{value:t.postForm.password,callback:function(e){t.$set(t.postForm,"password",e)},expression:"postForm.password"}})],1)],1)],1)],1)],1)],1)],1)],1)],1)},s=[],r=(a("7f7f"),a("db72")),n=a("8256"),i=a("70a2"),l=a("1aba"),c=a("b804"),p=(a("61f7"),a("2423"),a("828d")),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.Url+"/upload","show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.logo?a("img",{staticClass:"avatar",attrs:{src:t.logo}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])},m=[],d={name:"LoginImages",props:{logo:{type:String,default:""}},data:function(){return{Url:"https://hhh.10huisp.com/api/shop"}},methods:{handleAvatarSuccess:function(t,e){this.$emit("handelImages",e.response.path)},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type,a=t.size/1024/1024<2;return e||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),e&&a}}},h=d,f=(a("27c1"),a("2877")),v=Object(f["a"])(h,u,m,!1,null,null,null),b=v.exports,g=a("b775");function F(t){return Object(g["a"])({url:"/shop/PostDataByAdd",method:"post",data:t})}function _(t){return Object(g["a"])({url:"/shop/GetIdBydetailed",method:"get",params:{id:t}})}function y(t){return Object(g["a"])({url:"/city/getProvinces",method:"get",data:t})}function w(t){return Object(g["a"])({url:"/city/getCity",method:"get",params:{index:t}})}function x(t){return Object(g["a"])({url:"/city/getArea",method:"get",params:{index:t}})}var k=a("2f62"),O={name:"",shopname:"",password:"",location:"",status:1,logo:"",phone:void 0,startTime:"",endTime:""},$={name:"ArticleDetail",components:{Tinymce:n["a"],MDinput:l["a"],Upload:i["a"],Sticky:c["a"],LoginImages:b},props:{isEdit:{type:Boolean,default:!1}},computed:Object(r["a"])({},Object(k["b"])(["shop_id"])),data:function(){var t=this,e=function(e,a,o){""===a?(t.$message({message:e.field+"为必传项",type:"error"}),o(new Error(e.field+"为必传项"))):o()};return{Provinces:[],City:[],Area:[],postForm:Object.assign({},O),loading:!1,userListOptions:[],rules:{name:[{validator:e}],shopname:[{validator:e}],password:[{validator:e}],location:[{validator:e}],phone:[{validator:e}]}}},created:function(){var t=this,e=this.shop_id;this.fetchData(e),y().then((function(e){t.Provinces=e.data})),this.tempRoute=Object.assign({},this.$route)},methods:{handelProvinces:function(t){var e=this;this.City=[],this.postForm.city_code="",this.Area=[],this.postForm.area_code="",w(t).then((function(t){e.City=t.data}))},handelCity:function(t){var e=this;this.Area=[],this.postForm.area_code="",x(t).then((function(t){e.Area=t.data}))},handelLogin:function(t){this.postForm.logo=t},fetchData:function(t){var e=this;_(t).then((function(t){e.postForm=t.data,e.setTagsViewTitle(),w(e.postForm.povinces_code).then((function(t){e.City=t.data})),x(e.postForm.city_code).then((function(t){e.Area=t.data})),e.setPageTitle()})).catch((function(t){console.log(t)}))},setTagsViewTitle:function(){var t="编辑",e=Object.assign({},this.tempRoute,{title:"".concat(t,"-").concat(this.postForm.name)});this.$store.dispatch("tagsView/updateVisitedView",e)},setPageTitle:function(){var t="编辑";document.title="".concat(t," - ").concat(this.postForm.name)},submitForm:function(){var t=this;this.$refs.postForm.validate((function(e){if(!e)return!1;F(t.postForm).then((function(e){if(t.loading=!0,20004===e.status)return t.$message({message:e.message,type:"warning"}),void(t.postForm.status="2");t.$notify({title:"成功",message:e.message,type:"success",duration:2e3}),t.loading=!1}))}))},getRemoteUserList:function(t){var e=this;Object(p["a"])(t).then((function(t){t.data.items&&(e.userListOptions=t.data.items.map((function(t){return t.name})))}))}}},j=$,T=(a("50b5"),Object(f["a"])(j,o,s,!1,null,"2df95012",null));e["default"]=T.exports},f3a0:function(t,e,a){}}]);