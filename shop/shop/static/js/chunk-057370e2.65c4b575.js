(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-057370e2"],{2423:function(t,e,o){"use strict";o.d(e,"a",(function(){return s})),o.d(e,"c",(function(){return n})),o.d(e,"b",(function(){return r})),o.d(e,"d",(function(){return i})),o.d(e,"e",(function(){return l}));var a=o("b775");function s(t){return Object(a["a"])({url:"/article/GetDataByList",method:"get",params:t})}function n(t){return Object(a["a"])({url:"/article/GetIdByDetails",method:"get",params:{id:t}})}function r(t){return Object(a["a"])({url:"/article/GetIdByDel",method:"get",params:{id:t}})}function i(t){return Object(a["a"])({url:"/article/PostDataBySave",method:"post",data:t})}function l(t){return Object(a["a"])({url:"/article/PostDataByUp",method:"post",data:t})}},"27c1":function(t,e,o){"use strict";var a=o("f3a0"),s=o.n(a);s.a},3123:function(t,e,o){"use strict";o.d(e,"a",(function(){return s}));var a=o("b775");function s(){return Object(a["a"])({url:"/qiniu/upload/token",method:"get"})}},"828d":function(t,e,o){"use strict";o.d(e,"a",(function(){return s}));var a=o("b775");function s(t){return Object(a["a"])({url:"/search/user",method:"get",params:{name:t}})}},c591:function(t,e,o){"use strict";o.d(e,"c",(function(){return s})),o.d(e,"b",(function(){return n})),o.d(e,"a",(function(){return r}));var a=o("b775");function s(t){return Object(a["a"])({url:"/city/getProvinces",method:"get",data:t})}function n(t){return Object(a["a"])({url:"/city/getCity",method:"get",params:{index:t}})}function r(t){return Object(a["a"])({url:"/city/getArea",method:"get",params:{index:t}})}},e236:function(t,e,o){},eb43:function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"createPost-container"},[o("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.bloading,expression:"bloading"}],ref:"postForm",staticClass:"form-container",attrs:{model:t.postForm,rules:t.rules,"element-loading-text":"更新中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[o("sticky",{attrs:{"z-index":10,"class-name":"sub-navbar draft"}},[o("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{type:"warning"},on:{click:t.submitForm}},[t._v("保存")])],1),t._v(" "),o("div",{staticClass:"createPost-main-container"},[o("el-row",[o("el-col",{attrs:{span:24}},[o("el-form-item",{staticStyle:{"margin-bottom":"40px"},attrs:{prop:"name"}},[o("MDinput",{attrs:{maxlength:100,name:"name",required:""},model:{value:t.postForm.name,callback:function(e){t.$set(t.postForm,"name",e)},expression:"postForm.name"}},[t._v("Title")])],1),t._v(" "),o("div",{staticClass:"postInfo-container"},[o("el-row",[o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{"label-width":"120px",label:"店铺定位位置:",prop:"location"}},[o("el-input",{attrs:{placeholder:"输入店铺位置",clearable:""},model:{value:t.postForm.location,callback:function(e){t.$set(t.postForm,"location",e)},expression:"postForm.location"}})],1),t._v(" "),o("el-form-item",{attrs:{"label-width":"120px",label:"联系电话:",prop:"phone"}},[o("el-input",{attrs:{placeholder:"输入联系电话",clearable:""},model:{value:t.postForm.phone,callback:function(e){t.$set(t.postForm,"phone",e)},expression:"postForm.phone"}})],1)],1)],1),t._v(" "),o("el-row",[o("el-col",[o("el-form-item",{attrs:{"label-width":"120px",label:"营业时间:"}},[o("el-time-select",{attrs:{placeholder:"起始时间","picker-options":{start:"00:00",step:"00:15",end:"24:00"}},model:{value:t.postForm.startTime,callback:function(e){t.$set(t.postForm,"startTime",e)},expression:"postForm.startTime"}}),t._v(" "),o("el-time-select",{attrs:{placeholder:"结束时间","picker-options":{start:"00:30",step:"00:15",end:"24:00"}},model:{value:t.postForm.endTime,callback:function(e){t.$set(t.postForm,"endTime",e)},expression:"postForm.endTime"}})],1)],1)],1),t._v(" "),o("el-row",[o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{"label-width":"120px",label:"所在城市:"}},[o("el-select",{attrs:{placeholder:"请选择省份"},on:{change:t.handelProvinces},model:{value:t.postForm.povinces_code,callback:function(e){t.$set(t.postForm,"povinces_code",e)},expression:"postForm.povinces_code"}},t._l(t.Provinces,(function(t){return o("el-option",{key:t.area_code,attrs:{label:t.area_name,value:t.area_code}})})),1)],1)],1),t._v(" "),o("el-col",{attrs:{span:5}},[o("el-select",{attrs:{placeholder:"请选择城市"},on:{change:t.handelCity},model:{value:t.postForm.city_code,callback:function(e){t.$set(t.postForm,"city_code",e)},expression:"postForm.city_code"}},t._l(t.City,(function(t){return o("el-option",{key:t.area_code,attrs:{label:t.area_name,value:t.area_code}})})),1)],1),t._v(" "),o("el-col",{attrs:{span:5}},[o("el-select",{attrs:{placeholder:"请选择城市"},model:{value:t.postForm.area_code,callback:function(e){t.$set(t.postForm,"area_code",e)},expression:"postForm.area_code"}},t._l(t.Area,(function(t){return o("el-option",{key:t.area_code,attrs:{label:t.area_name,value:t.area_code}})})),1)],1)],1),t._v(" "),o("el-row",[o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{"label-width":"120px",label:"二维码背景图:"}},[o("LoginImages",{attrs:{logo:t.postForm.low_bg},on:{handelImages:t.handelLow}}),t._v("\n\n                  背景图图标规格 429x678\n\n                ")],1)],1)],1),t._v(" "),t.postForm.id?o("el-row",[o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{"label-width":"120px",label:"店铺二维码:",prop:"logo"}},[o("img",{staticClass:"shop_code",attrs:{src:t.Img+t.postForm.shop_code}}),t._v(" "),o("el-button",{attrs:{type:"text"},on:{click:t.handelCode}},[t._v("更新店铺二维码")])],1)],1)],1):t._e(),t._v(" "),o("el-row",[o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{"label-width":"120px",label:"店铺Logo:",prop:"logo"}},[o("LoginImages",{attrs:{logo:t.postForm.logo},on:{handelImages:t.handelLogin}})],1)],1)],1),t._v(" "),o("el-row",[o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{"label-width":"120px",label:"店铺首页Logo:",prop:"logo"}},[o("LoginImages",{attrs:{logo:t.postForm.shop_logo},on:{handelImages:t.handelShopLogo}})],1)],1)],1),t._v(" "),o("el-row",[o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{"label-width":"120px",label:"店铺是否开启:"}},[o("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#909399","active-value":"1","inactive-value":"2"},model:{value:t.postForm.status,callback:function(e){t.$set(t.postForm,"status",e)},expression:"postForm.status"}})],1)],1)],1),t._v(" "),o("el-row",[o("el-col",{attrs:{span:10,prop:"shopname"}},[o("el-form-item",{attrs:{"label-width":"120px",label:"登录账号:",prop:"shopname"}},[o("el-input",{attrs:{placeholder:"输入店铺账号",clearable:""},model:{value:t.postForm.shopname,callback:function(e){t.$set(t.postForm,"shopname",e)},expression:"postForm.shopname"}})],1)],1),t._v(" "),o("el-col",{attrs:{span:10}},[o("el-form-item",{attrs:{"label-width":"120px",label:"登录密码:",prop:"password"}},[o("el-input",{attrs:{placeholder:"输入登录密码",clearable:""},model:{value:t.postForm.password,callback:function(e){t.$set(t.postForm,"password",e)},expression:"postForm.password"}})],1)],1)],1)],1)],1)],1)],1)],1)],1)},s=[],n=(o("7f7f"),o("db72")),r=o("8256"),i=o("70a2"),l=o("1aba"),c=o("b804"),p=(o("61f7"),o("2423"),o("828d")),d=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.Url+"/upload","show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.logo?o("img",{staticClass:"avatar",attrs:{src:t.logo}}):o("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])},m=[],u={name:"LoginImages",props:{logo:{type:String,default:""}},data:function(){return{Url:"https://hhh.10huisp.com/api/shop"}},methods:{handleAvatarSuccess:function(t,e){this.$emit("handelImages",e.response.path)},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type,o=t.size/1024/1024<2;return e||this.$message.error("上传头像图片只能是 JPG 格式!"),o||this.$message.error("上传头像图片大小不能超过 2MB!"),e&&o}}},h=u,f=(o("27c1"),o("2877")),g=Object(f["a"])(h,d,m,!1,null,null,null),b=g.exports,v=o("b775");function _(t){return Object(v["a"])({url:"/shop/PostDataByAdd",method:"post",data:t})}function F(t){return Object(v["a"])({url:"/shop/GetIdBydetailed",method:"get",params:{id:t}})}function w(t){return Object(v["a"])({url:"/shop/UpdateCode",method:"get",params:{id:t}})}var y=o("c591"),x=o("2f62"),O={name:"",shopname:"",password:"",location:"",status:1,logo:"",phone:void 0,startTime:"",endTime:""},j={name:"ArticleDetail",components:{Tinymce:r["a"],MDinput:l["a"],Upload:i["a"],Sticky:c["a"],LoginImages:b},props:{isEdit:{type:Boolean,default:!1}},computed:Object(n["a"])({},Object(x["b"])(["shop_id"])),data:function(){var t=this,e=function(e,o,a){""===o?(t.$message({message:e.field+"为必传项",type:"error"}),a(new Error(e.field+"为必传项"))):a()};return{bloading:!1,Provinces:[],City:[],Area:[],Img:"https://hhh.10huisp.com",postForm:Object.assign({},O),loading:!1,userListOptions:[],rules:{name:[{validator:e}],shopname:[{validator:e}],password:[{validator:e}],location:[{validator:e}],phone:[{validator:e}]}}},created:function(){var t=this,e=this.shop_id;this.fetchData(e),Object(y["c"])().then((function(e){t.Provinces=e.data})),this.tempRoute=Object.assign({},this.$route)},methods:{handelLow:function(t){this.postForm.low_bg=t},handelCode:function(){var t=this;this.bloading=!0,w(this.shop_id).then((function(e){t.postForm.shop_code=e.data,t.bloading=!1,t.$message("更新后记得保存数据!!!!!")}))},handelProvinces:function(t){var e=this;this.City=[],this.postForm.city_code="",this.Area=[],this.postForm.area_code="",Object(y["b"])(t).then((function(t){e.City=t.data}))},handelCity:function(t){var e=this;this.Area=[],this.postForm.area_code="",Object(y["a"])(t).then((function(t){e.Area=t.data}))},handelLogin:function(t){this.postForm.logo=t},handelShopLogo:function(t){this.postForm.shop_logo=t},fetchData:function(t){var e=this;F(t).then((function(t){e.postForm=t.data,e.setTagsViewTitle(),Object(y["b"])(e.postForm.povinces_code).then((function(t){e.City=t.data})),Object(y["a"])(e.postForm.city_code).then((function(t){e.Area=t.data})),e.setPageTitle()})).catch((function(t){console.log(t)}))},setTagsViewTitle:function(){var t="编辑",e=Object.assign({},this.tempRoute,{title:"".concat(t,"-").concat(this.postForm.name)});this.$store.dispatch("tagsView/updateVisitedView",e)},setPageTitle:function(){var t="编辑";document.title="".concat(t," - ").concat(this.postForm.name)},submitForm:function(){var t=this;this.$refs.postForm.validate((function(e){if(!e)return!1;_(t.postForm).then((function(e){if(t.loading=!0,20004===e.status)return t.$message({message:e.message,type:"warning"}),void(t.postForm.status="2");t.$notify({title:"成功",message:e.message,type:"success",duration:2e3}),t.loading=!1}))}))},getRemoteUserList:function(t){var e=this;Object(p["a"])(t).then((function(t){t.data.items&&(e.userListOptions=t.data.items.map((function(t){return t.name})))}))}}},k=j,$=(o("efdd"),Object(f["a"])(k,a,s,!1,null,"695ddf24",null));e["default"]=$.exports},efdd:function(t,e,o){"use strict";var a=o("e236"),s=o.n(a);s.a},f3a0:function(t,e,o){}}]);